<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Garden Defense</title>
<style>
body{font-family:Arial;background:linear-gradient(#6ecf68,#4a8f3a);margin:0;text-align:center}
h1{margin:10px;color:#fff;text-shadow:1px 1px 2px #000}
#ui{display:flex;justify-content:center;gap:10px;margin-bottom:10px}
button{padding:10px 14px;font-size:14px;cursor:pointer;border:none;border-radius:8px;box-shadow:0 3px 0 #333}
#energy{font-weight:bold;font-size:18px;color:#fff}
#game{position:relative;display:grid;grid-template-rows:repeat(5,90px);grid-template-columns:repeat(9,90px);gap:4px;justify-content:center;margin:auto;background:#3b6b2a;padding:6px;border-radius:16px}
.cell{background:radial-gradient(#9be27d,#6ecf68);border-radius:18px;position:relative}
.plant{width:70px;height:70px;margin:auto;margin-top:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff;font-weight:bold}
.shooter{background:#4caf50;box-shadow:inset -4px -4px 0 #2e7d32}
.wall{background:#8d6e63;border-radius:18px;box-shadow:inset -4px -4px 0 #5d4037}
.sun{background:#ffeb3b;color:#000;box-shadow:inset -4px -4px 0 #fbc02d}
.enemy{position:absolute;width:60px;height:60px;background:#9e9e9e;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold}
.bullet{position:absolute;width:14px;height:6px;background:#222;border-radius:4px}
</style>
</head>
<body>
<h1>üå± Garden Defense</h1>
<div id="ui">
<div id="energy">Energia: 50</div>
<button onclick="selectPlant('shooter')">üåø Atirador (25)</button>
<button onclick="selectPlant('wall')">üß± Defensor (20)</button>
<button onclick="selectPlant('sun')">‚òÄÔ∏è Gerador (15)</button>
</div>
<div id="game"></div>
<script>
const rows=5, cols=9;
const game=document.getElementById('game');
const energyEl=document.getElementById('energy');
let energy=50, selectedPlant=null;
let grid=[], enemies=[];
function updateEnergy(){energyEl.innerText='Energia: '+energy}
function selectPlant(t){selectedPlant=t}
function cost(t){return t==='shooter'?25:t==='wall'?20:15}
function createGrid(){
 for(let r=0;r<rows;r++){grid[r]=[];
  for(let c=0;c<cols;c++){
   const cell=document.createElement('div');cell.className='cell';
   cell.onclick=()=>placePlant(r,c,cell);
   game.appendChild(cell);
   grid[r][c]={plant:null,cell,life:0};
  }
 }
}
function placePlant(r,c,cell){
 if(!selectedPlant||grid[r][c].plant||energy<cost(selectedPlant))return;
 energy-=cost(selectedPlant);updateEnergy();
 const plant=document.createElement('div');
 plant.className='plant '+selectedPlant;
 plant.innerText=selectedPlant==='wall'?'üß±':selectedPlant==='sun'?'‚òÄÔ∏è':'üåø';
 cell.appendChild(plant);
 grid[r][c].plant=selectedPlant;
 grid[r][c].life=selectedPlant==='wall'?100:50;
 if(selectedPlant==='sun'){
  setInterval(()=>{energy+=5;updateEnergy()},5000)
 }
 if(selectedPlant==='shooter'){
  setInterval(()=>shoot(r,cell),1200)
 }
}
function shoot(row,cell){
 const bullet=document.createElement('div');bullet.className='bullet';
 const startX=cell.offsetLeft+cell.offsetWidth;
 const startY=cell.offsetTop+cell.offsetHeight/2-3;
 bullet.style.left=startX+'px';bullet.style.top=startY+'px';
 game.appendChild(bullet);let x=startX;
 const move=setInterval(()=>{
  x+=6;bullet.style.left=x+'px';
  enemies.forEach((e,i)=>{
   if(e.row===row && x+14>e.x && x<e.x+60){
    e.life-=10;bullet.remove();clearInterval(move);
    if(e.life<=0){e.el.remove();enemies.splice(i,1)}
   }
  })
  if(x>game.offsetWidth){bullet.remove();clearInterval(move)}
 },30)
}
function spawnEnemy(){
 const row=Math.floor(Math.random()*rows);
 const enemy=document.createElement('div');enemy.className='enemy';enemy.innerText='üßü';
 game.appendChild(enemy);
 let enemyObj={el:enemy,row,life:60,x:game.offsetWidth-60,speed:1};
 enemy.style.top=row*94+15+'px';enemy.style.left=enemyObj.x+'px';
 enemies.push(enemyObj);
 const walk=setInterval(()=>{
  const col=Math.floor(enemyObj.x/94);
  if(col>=0 && grid[row][col] && grid[row][col].plant==='wall'){
   grid[row][col].life-=1;
   if(grid[row][col].life<=0){grid[row][col].cell.innerHTML='';grid[row][col].plant=null}
   return;
  }
  enemyObj.x-=enemyObj.speed;enemy.style.left=enemyObj.x+'px';
  if(enemyObj.x<=0){alert('Game Over');location.reload()}
 },40)
}
createGrid();updateEnergy();let round=1;
let enemiesToSpawn=3;
let spawned=0;
let spawnInterval;
startRound();

function startRound(){
  spawned=0;
  enemiesToSpawn=2+round;
  showRound();
  spawnInterval=setInterval(()=>{
    if(spawned<enemiesToSpawn){
      spawnEnemy();
      spawned++;
    }else{
      clearInterval(spawnInterval);
      setTimeout(()=>{round++;startRound();},4000);
    }
  },1200);
}

function showRound(){
  const r=document.createElement('div');
  r.innerText='ROUND '+round;
  r.style.position='absolute';
  r.style.top='50%';
  r.style.left='50%';
  r.style.transform='translate(-50%,-50%)';
  r.style.fontSize='36px';
  r.style.color='white';
  r.style.textShadow='2px 2px 4px black';
  r.style.zIndex='10';
  game.appendChild(r);
  setTimeout(()=>r.remove(),2000);
}
</script>
</body>
</html>
